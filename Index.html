<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Notificación</title>
</head>
	<style type="text/css">
		div.container{
			width: 80%;
			margin: auto;
		}
		button{
			border-style: none;
		}
		.btn{
			background-color: #4285f4;
			padding: 10px;
			color: white;			
		}
		.btn:hover{
			cursor: pointer;
		}
	</style>
<body>
	<div class="container">
		<hr>
		<div class="action">
			<button class="btn btn-style" id="btnNotification">
				mostrar notificacion
			</button>
		</div>
	</div>
	<script type="text/javascript">
		Notification.requestPermission(function(result) {
		  if (result === 'denied') {
		    console.log('Permission wasn\'t granted. Allow a retry.');
		    return;
		  } else if (result === 'default') {
		    console.log('The permission request was dismissed.');
		    return;
		  }
		  // Hacer algo con el permiso concedido.
		});

		

		document.getElementById("btnNotification").addEventListener('click',evnt=>{
			if (!("Notification" in window)) {
			    alert("This browser does not support desktop notification");
			  }

			  // Let's check whether notification permissions have already been granted
			  else if (Notification.permission === "granted") {
			    // If it's okay let's create a notification
			      var notification = new Notification("Titulo de la notificacion a mostrar",{
			        	body:'Esto es una notificacion de prueba el prototipo esta en desarrollo por lo cual puede presentar errores'
			        });
			  }

			  // Otherwise, we need to ask the user for permission
			  else if (Notification.permission !== 'denied') {
			    Notification.requestPermission(function (permission) {
			      // If the user accepts, let's create a notification
			      if (permission === "granted") {
			        var notification = new Notification("Hi there!");
			      }
			    });
			  }
			  notification.onclick = function(event) {
				  event.preventDefault(); // Previene al buscador de mover el foco a la pestaña del Notification
				  window.open('http://www.mozilla.org', '_blank');
				  notification.close();
				}
		});		
	</script>
</body>
</html>